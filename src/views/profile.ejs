<!DOCTYPE html>
<html lang='uk'>

<head>
  <meta charset='UTF-8'>
  <meta name='viewport' content='width=device-width, initial-scale=1.0'>
  <title>–ü—Ä–æ—Ñ—ñ–ª—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ - Products Server</title>
  <%- include('styles') %>
    <style>
      .profile-container {
        max-width: 700px;
        margin: 0 auto;
      }

      .profile-header {
        display: flex;
        align-items: center;
        gap: 20px;
        padding: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 12px;
        margin-bottom: 30px;
        color: white;
      }

      .profile-avatar {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: 4px solid white;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
      }

      .profile-info {
        flex: 1;
      }

      .profile-name {
        font-size: 28px;
        font-weight: bold;
        margin: 0 0 10px 0;
      }

      .profile-email {
        font-size: 16px;
        opacity: 0.9;
        margin: 0;
      }

      .profile-details {
        background: white;
        padding: 30px;
        border-radius: 12px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      }

      .detail-row {
        display: flex;
        padding: 15px 0;
        border-bottom: 1px solid #e9ecef;
      }

      .detail-row:last-child {
        border-bottom: none;
      }

      .detail-label {
        font-weight: 600;
        color: #555;
        width: 200px;
        flex-shrink: 0;
      }

      .detail-value {
        color: #333;
        flex: 1;
      }

      .provider-badge {
        display: inline-block;
        padding: 4px 12px;
        background-color: #007bff;
        color: white;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
        text-transform: uppercase;
      }

      .provider-badge.google-oauth2 {
        background-color: #db4437;
      }

      .provider-badge.github {
        background-color: #333;
      }

      .provider-badge.facebook {
        background-color: #1877f2;
      }

      .provider-badge.twitter {
        background-color: #1da1f2;
      }

      .status-badge {
        display: inline-block;
        padding: 4px 12px;
        background-color: #28a745;
        color: white;
        border-radius: 12px;
        font-size: 12px;
        font-weight: 600;
      }

      .status-badge.inactive {
        background-color: #dc3545;
      }

      .api-token-section {
        background: #f8f9fa;
        padding: 20px;
        border-radius: 8px;
        margin-top: 30px;
      }

      .api-token-section h3 {
        margin-top: 0;
        color: #333;
      }

      .api-instructions {
        font-size: 14px;
        color: #666;
        margin-bottom: 15px;
        line-height: 1.6;
      }

      .code-block {
        background: #2d2d2d;
        color: #f8f8f2;
        padding: 15px;
        border-radius: 4px;
        font-family: 'Courier New', monospace;
        font-size: 13px;
        overflow-x: auto;
        margin-top: 10px;
      }
    </style>
</head>

<body>
  <div class='container'>
    <%- include('navigation') %>

      <div class='profile-container'>
        <div class='profile-header'>
          <% if (user.picture) { %>
            <img src='<%= user.picture %>' alt='Avatar' class='profile-avatar' referrerpolicy='no-referrer' crossorigin='anonymous'>
            <% } else { %>
              <div class='profile-avatar' style='background-color: #007bff; display: flex; align-items: center; justify-content: center; font-size: 48px;'>
                <%= user.name.charAt(0).toUpperCase() %>
              </div>
              <% } %>

                <div class='profile-info'>
                  <h1 class='profile-name'>
                    <%= user.name %>
                  </h1>
                  <p class='profile-email'>
                    <%= user.email %>
                  </p>
                </div>
        </div>

        <div class='profile-details'>
          <h2>–î–µ—Ç–∞–ª—ñ –ø—Ä–æ—Ñ—ñ–ª—é</h2>

          <div class='detail-row'>
            <div class='detail-label'>–Ü–º'—è:</div>
            <div class='detail-value'>
              <%= user.name %>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>Email:</div>
            <div class='detail-value'>
              <%= user.email %>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>–ü—Ä–æ–≤–∞–π–¥–µ—Ä:</div>
            <div class='detail-value'>
              <span class='provider-badge <%= user.provider %>'>
                <%= user.provider %>
              </span>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>–°—Ç–∞—Ç—É—Å:</div>
            <div class='detail-value'>
              <span class='status-badge <%= user.isActive ? '' : ' inactive' %>'>
                <%= user.isActive ? '–ê–∫—Ç–∏–≤–Ω–∏–π' : '–ù–µ–∞–∫—Ç–∏–≤–Ω–∏–π' %>
              </span>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>–û—Å—Ç–∞–Ω–Ω—ñ–π –≤—Ö—ñ–¥:</div>
            <div class='detail-value'>
              <%= new Date(user.lastLogin).toLocaleString('uk-UA', { year: 'numeric' , month: 'long' , day: 'numeric' , hour: '2-digit' , minute: '2-digit' }) %>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>–î–∞—Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:</div>
            <div class='detail-value'>
              <%= new Date(user.createdAt).toLocaleString('uk-UA', { year: 'numeric' , month: 'long' , day: 'numeric' }) %>
            </div>
          </div>

          <div class='detail-row'>
            <div class='detail-label'>Auth0 ID:</div>
            <div class='detail-value' style='font-family: monospace; font-size: 12px;'>
              <%= user.auth0Id %>
            </div>
          </div>
        </div>

        <div class='api-token-section'>
          <h3>üîê API –¢–æ–∫–µ–Ω</h3>
          <p class='api-instructions'>
            –î–ª—è –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è REST API –æ—Ç—Ä–∏–º–∞–π—Ç–µ JWT —Ç–æ–∫–µ–Ω. –¢–æ–∫–µ–Ω –¥—ñ–π—Å–Ω–∏–π –ø—Ä–æ—Ç—è–≥–æ–º 7 –¥–Ω—ñ–≤.
            –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –π–æ–≥–æ –≤ Authorization header –¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö API –∑–∞–ø–∏—Ç—ñ–≤.
          </p>

          <a href='/auth/api/token' class='btn btn-primary'>–û—Ç—Ä–∏–º–∞—Ç–∏ JWT —Ç–æ–∫–µ–Ω</a>

          <div class='code-block'>
            # –ü—Ä–∏–∫–ª–∞–¥ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è:<br>
            curl -X GET http://localhost:3000/api/products \<br>
            -H "Authorization: Bearer YOUR_JWT_TOKEN_HERE"<br>
            <br>
            curl -X POST http://localhost:3000/api/products \<br>
            -H "Authorization: Bearer YOUR_JWT_TOKEN_HERE" \<br>
            -H "Content-Type: application/json" \<br>
            -d '{"name":"Product","price":99.99,"description":"Description"}'
          </div>
        </div>

        <div style='margin-top: 30px; text-align: center;'>
          <a href='/products' class='btn'>–ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏</a>
          <a href='/' class='btn'>–ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>
        </div>
      </div>
  </div>
</body>

</html>
