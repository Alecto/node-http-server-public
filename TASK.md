# üöÄ –ó–∞–≤–¥–∞–Ω–Ω—è: –ú—ñ–≥—Ä–∞—Ü—ñ—è Express-–ø—Ä–æ—î–∫—Ç—É –Ω–∞ MongoDB Atlas —á–µ—Ä–µ–∑ Mongoose

**–ì—ñ–ª–∫–∞:** `mongoose-migration`

**–°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å:** –°–µ—Ä–µ–¥–Ω—è ‚Üí –í–∏—Å–æ–∫–∞

## –ú–µ—Ç–∞

- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∫–æ–¥ –∑ in-memory –º–æ–∫—ñ–≤ (–≥—ñ–ª–∫–∞ `express-migration`) –Ω–∞ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–∏–π MongoDB Atlas
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Mongoose —è–∫ ODM: —Å—Ö–µ–º–∏, –≤–∞–ª—ñ–¥–∞—Ü—ñ—è, —ñ–Ω–¥–µ–∫—Å–∏, —Ä–æ–±–æ—Ç–∞ –∑ ObjectId
- –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏–π –ø—Ä–æ—Ü–µ—Å —Å–∏–¥—É–≤–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö —ñ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –∑ –∂–∏–≤–æ—é –ë–î
- –û–Ω–æ–≤–∏—Ç–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—é –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω–æ –¥–æ –Ω–æ–≤–æ—ó –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏

## –ö–ª—é—á–æ–≤—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

- `ProductModel` (Mongoose —Å—Ö–µ–º–∞ + —ñ–Ω–¥–µ–∫—Å–∏) –∑ —É–Ω—ñ–∫–∞–ª—å–Ω–∏–º `name` (case-insensitive) —Ç–∞ `createdAt` —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è–º
- `connectToDatabase`/`disconnectFromDatabase` –∑ –ª–æ–≥—É–≤–∞–Ω–Ω—è–º, `autoIndex`, `maxPoolSize` –∑ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó
- –í—Å—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (API + HTML) –ø—Ä–∞—Ü—é—é—Ç—å —á–µ—Ä–µ–∑ Mongoose (`lean()`, `runValidators`, `findByIdAndUpdate` —Ç–æ—â–æ)
- Middleware `validateObjectIdParam` –ø–æ–≤–µ—Ä—Ç–∞—î 400/404 –¥–ª—è –Ω–µ–∫–æ—Ä–µ–∫—Ç–Ω–∏—Ö ObjectId
- `scripts/seedProducts.mjs` + `seeds/products.json` ‚Äî –ø–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—è –ø–æ—á–∞—Ç–∫–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö —É MongoDB
- `scripts/checkServer.mjs` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–æ–≤–∞–Ω–∞ —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
- `tests/runTests.mjs` ‚Äî —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ —Ç–µ—Å—Ç–∏ –Ω–∞ –æ–∫—Ä–µ–º—ñ–π –ë–î `atlas-products-test`, –æ—á–∏—â–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π –ø—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É
- –û–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è (`docs/API.md`, `docs/ARCHITECTURE.md`, `docs/TESTING.md`, `docs/MIGRATION.md`)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ—î–∫—Ç—É (–ø—ñ—Å–ª—è –º—ñ–≥—Ä–∞—Ü—ñ—ó)

```
node-http-server/
‚îú‚îÄ‚îÄ scripts/                # –°–ª—É–∂–±–æ–≤—ñ —Å–∫—Ä–∏–ø—Ç–∏ (seed, —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ–π–Ω—ñ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏)
‚îú‚îÄ‚îÄ seeds/                  # JSON –¥–∞–Ω—ñ –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îú‚îÄ‚îÄ database/
‚îÇ   ‚îú‚îÄ‚îÄ middleware/
‚îÇ   ‚îú‚îÄ‚îÄ models/
‚îÇ   ‚îú‚îÄ‚îÄ routes/
‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îî‚îÄ‚îÄ views/
‚îú‚îÄ‚îÄ tests/
‚îú‚îÄ‚îÄ docs/
‚îÇ   ‚îî‚îÄ‚îÄ MIGRATION.md        # –ù–æ–≤–∏–π –¥–æ–∫—É–º–µ–Ω—Ç
‚îú‚îÄ‚îÄ index.mjs
‚îú‚îÄ‚îÄ package.json
‚îî‚îÄ‚îÄ README.md
```

## –ö—Ä–æ–∫–∏ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

1. **–ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB**

   - –û–Ω–æ–≤–∏—Ç–∏ `src/config/index.mjs` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ URI/autoIndex/maxPoolSize
   - –†–æ–∑—à–∏—Ä–∏—Ç–∏ `src/database/connection.mjs` –ø–æ–¥—ñ—è–º–∏ Mongoose —Ç–∞ –∫–µ—Ä—É–≤–∞–Ω–Ω—è–º –ø—É–ª–æ–º

2. **–ú–æ–¥–µ–ª—å Mongoose**

   - –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ —Å—Ö–µ–º—É `Product` –∑ –≤–∞–ª—ñ–¥–∞—Ç–æ—Ä–∞–º–∏ (–¥–æ–≤–∂–∏–Ω–∏, trim, min) —Ç–∞ —ñ–Ω–¥–µ–∫—Å–∞–º–∏
   - `toJSON` –º–∞—î –ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ `id` –∑–∞–º—ñ—Å—Ç—å `_id`

3. **–ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ –º–∞—Ä—à—Ä—É—Ç–∏**

   - –ó–∞–º—ñ–Ω–∏—Ç–∏ in-memory CRUD –Ω–∞ –≤–∏–∫–ª–∏–∫–∏ `ProductModel`
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `lean()` –¥–ª—è —á–∏—Ç–∞–Ω–Ω—è, `runValidators` –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω—å
   - –î–æ–¥–∞—Ç–∏ middleware `validateObjectIdParam` —É API —Ç–∞ Web –º–∞—Ä—à—Ä—É—Ç–∏

4. **Seed —Ç–∞ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü—ñ—è**

   - –í–∏–Ω–µ—Å—Ç–∏ –¥–∞–Ω—ñ —É `seeds/products.json`
   - –°—Ç–≤–æ—Ä–∏—Ç–∏ `scripts/seedProducts.mjs` –¥–ª—è —ñ–º–ø–æ—Ä—Ç—É (–æ—á–∏—â–µ–Ω–Ω—è + `insertMany`)
   - –°—Ç–≤–æ—Ä–∏—Ç–∏ `scripts/checkServer.mjs` –¥–ª—è —Å—Ü–µ–Ω–∞—Ä—ñ—é (GET/POST/PATCH/PUT/DELETE + HTML)

5. **–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è**

   - –û–Ω–æ–≤–∏—Ç–∏ `tests/runTests.mjs` –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ —Ç–µ—Å—Ç–æ–≤–æ—é –ë–î, —ñ–º–ø–æ—Ä—Ç—É –¥–∞–Ω–∏—Ö —ñ–∑ JSON, –æ—á–∏—â–µ–Ω–Ω—è –∫–æ–ª–µ–∫—Ü—ñ–π
   - –ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ –∑–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ `yarn test`

6. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è**
   - –û–Ω–æ–≤–∏—Ç–∏ `docs/API.md`, `docs/ARCHITECTURE.md`, `docs/TESTING.md`, –¥–æ–¥–∞—Ç–∏ `docs/MIGRATION.md`
   - –û–Ω–æ–≤–∏—Ç–∏ `README.md` —ñ —Ü–µ–π —Ñ–∞–π–ª —ñ–∑ –Ω–æ–≤–∏–º–∏ –≤–∏–º–æ–≥–∞–º–∏

## –ö—Ä–∏—Ç–µ—Ä—ñ—ó —É—Å–ø—ñ—Ö—É

- –°–µ—Ä–≤–µ—Ä —Å—Ç–∞—Ä—Ç—É—î –Ω–∞ MongoDB Atlas (–∞–±–æ –ª–æ–∫–∞–ª—å–Ω–æ–º—É MongoDB), `ProductModel.syncIndexes()` –≤—ñ–¥–ø—Ä–∞—Ü—å–æ–≤—É—î –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ –æ—Ö–æ–ø–ª—é—é—Ç—å —É—Å—ñ CRUD —Å—Ü–µ–Ω–∞—Ä—ñ—ó; –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –ø—Ä–∞—Ü—é—é—Ç—å –Ω–∞ —Ä—ñ–≤–Ω—ñ middleware + Mongoose
- `seedProducts.mjs` —É—Å–ø—ñ—à–Ω–æ –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç—å –¥–∞–Ω—ñ –±–µ–∑ –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ —ñ–Ω–¥–µ–∫—Å—ñ–≤
- `scripts/checkServer.mjs` –∑–∞–≤–µ—Ä—à—É—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- `yarn test` –ø—Ä–æ—Ö–æ–¥–∏—Ç—å —Ç–∞ –æ—á–∏—â—É—î —Ç–µ—Å—Ç–æ–≤—É –ë–î
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –æ–ø–∏—Å—É—î –Ω–æ–≤–∏–π —Å—Ç–µ–∫, —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –∑ –º—ñ–≥—Ä–∞—Ü—ñ—ó —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## –ü–æ–¥–∞–ª—å—à—ñ –∫—Ä–æ–∫–∏ (–Ω–µ–æ–±–æ–≤ º—è–∑–∫–æ–≤–æ)

- –î–æ–¥–∞—Ç–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—é/–∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—é
- –í–∏–Ω–µ—Å—Ç–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —É Kubernetes Secrets/ConfigMaps
- –î–æ–¥–∞—Ç–∏ observability (metrics, health checks)
