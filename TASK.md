# Express.js Basic Migration Task

**Складність:** Середня

**Мета:** Створити простий HTTP сервер на Node.js з використанням вбудованого модуля http, без додаткових фреймворків, який демонструє основні принципи роботи з HTTP у Node.js.

---

### **Постановка задачі (міграція з Node HTTP на Express)**

1. **Підготовка**

   - Видаліть залежності та файли, пов’язані з todos (контролери, моделі, HTML шаблони).
   - Додайте Express, EJS та method-override до `package.json`.
   - Переконайтесь, що `README.md` описує саме Express версію (мінімальний CRUD для продуктів).

2. **Структура проекту**

   - Створіть наступну структуру каталогів та файлів:
     ```
     node-http-server/
     ├── src/
     │   ├── config/
     │   ├── controllers/
     │   │   ├── pageController.mjs
     │   │   └── productController.mjs
     │   ├── models/              # in-memory products
     │   ├── routes/
     │   │   └── router.mjs
     │   ├── middleware/
     │   ├── views/               # EJS шаблони
     │   └── server.mjs           # Express сервер
     ├── index.mjs
     ├── package.json
     └── README.md
     ```

3. **Міграція на Express**

   - Замініть `http.createServer` на Express `app` у `src/server.mjs`.
   - Налаштуйте `express.urlencoded`, `express.json`, `method-override('_method')`.
   - Встановіть EJS як template engine та вкажіть папку `views`.
   - Підключіть маршрути через `setupRoutes(app)`.

4. **Оновлення маршрутів і контролерів**

   - Створіть контролер `productController.mjs` із методами:
     - `getHomePage` — головна сторінка з навігацією.
     - `getProducts` — список продуктів (HTML).
     - `getNewProductForm` — форма створення.
     - `getProduct` — деталі одного продукту.
     - `createProduct` — створення продукту по POST-формі.
   - Замініть маршрути todos на маршрути products у `src/routes/router.mjs` із ланцюговими викликами `.route()`.

5. **Моделі та дані**

   - Створіть просту in-memory модель `src/models/products.mjs` з первинними даними (масив, `addProduct`, `getProductById`).
   - Переконайтесь, що кожне нове створення продукту збільшує `id`.

6. **Шаблони**

   - Додайте EJS файли: `index.ejs`, `products.ejs`, `product-form.ejs`, `product-detail.ejs`.
   - У кожному шаблоні передбачте навігацію між головною, списком та формою.

7. **Запуск та тестування**

   - Запустіть сервер (`yarn dev`) і перевірте:
     - `GET /`
     - `GET /products`
     - `GET /products/new`
     - `GET /products/:id`
     - `POST /products` (через HTML форму)
   - Переконайтесь, що при POST на форму продукт додається та відображається в списку.

8. **Документація**

   - Оновіть README під Express реалізацію.
   - Опишіть у README базові ендпоінти та як запустити проект.

## Додаткові ідеї

- Додайте валідацію полів форми.
- Реалізуйте простий API `/api/products` (GET/POST).
- Ведіть журнал дій у логгері при кожному запиті.

---

### **Критерії оцінювання:**

1. **Структура проекту**:

   - Код організовано відповідно до вказаної структури
   - Дотримано принципів модульності та розділення відповідальності

2. **Функціональність**:

   - Сервер успішно запускається та обробляє запити
   - Всі маршрути працюють коректно
   - Реалізовано обробку помилок

3. **Якість коду**:

   - Код читабельний та добре документований
   - Використано сучасні можливості JavaScript (ES6+)
   - Асинхронні операції оброблено належним чином (async/await)

4. **Додаткові функції**:
   - Реалізація додаткових завдань буде плюсом

---

### **Поради:**

- Використовуйте асинхронні функції (async/await) для обробки запитів та файлових операцій
- Розбивайте код на малі, спеціалізовані функції, кожна з яких відповідає за одну конкретну задачу
- Для кращої структури коду, групуйте пов'язані функції в окремі модулі
- Уникайте повторення коду, створюйте утиліти для часто використовуваних функцій
- Використовуйте константи для зберігання кодів статусу HTTP та заголовків
- Для ефективної роботи з асинхронним кодом, правильно обробляйте помилки та використовуйте try/catch
- Тестуйте весь функціонал на різних вхідних даних, включаючи крайові випадки
- Для зручності розробки, використовуйте API-клієнти (Postman, Insomnia) для тестування вашого API

---

### **Приклад структури проекту:**

```
node-http-server/
├── src/
│   ├── config/
│   ├── controllers/
│   │   ├── pageController.mjs
│   │   └── productController.mjs
│   ├── models/
│   │   └── products.mjs
│   ├── routes/
│   │   └── router.mjs
│   ├── middleware/
│   ├── views/
│   │   ├── index.ejs
│   │   ├── products.ejs
│   │   ├── product-form.ejs
│   │   └── product-detail.ejs
│   └── server.mjs
├── index.mjs
├── .env
├── package.json
└── README.md
```
