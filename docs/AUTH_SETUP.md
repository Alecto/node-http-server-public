# üöÄ –®–≤–∏–¥–∫–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Auth0

> **–®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç:** –ü–æ–∫—Ä–æ–∫–æ–≤—ñ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—ó –¥–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó Auth0 –≤ –ø—Ä–æ–µ–∫—Ç—ñ.
>
> –î–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ—ó —Ç–µ—Ö–Ω—ñ—á–Ω–æ—ó –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –¥–∏–≤. [AUTHENTICATION.md](AUTHENTICATION.md)

## üìù –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è Auth0 –∞–∫–∞—É–Ω—Ç—É

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ [auth0.com](https://auth0.com/)
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Sign Up"**
3. –í–∏–±–µ—Ä—ñ—Ç—å **"Personal"** –¥–ª—è –±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ–≥–æ –ø–ª–∞–Ω—É
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å email

## üîß –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É

1. –í Auth0 Dashboard –ø–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Applications ‚Üí Applications**
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create Application"**
3. –í–≤–µ–¥—ñ—Ç—å –Ω–∞–∑–≤—É: `Node Products Server`
4. –í–∏–±–µ—Ä—ñ—Ç—å **"Regular Web Applications"**
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Create"**

## ‚öôÔ∏è –ö—Ä–æ–∫ 3: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–æ–¥–∞—Ç–∫—É

### Settings

–í —Ä–æ–∑–¥—ñ–ª—ñ **Settings** –∑–Ω–∞–π–¥—ñ—Ç—å —Ç–∞ —Å–∫–æ–ø—ñ—é–π—Ç–µ:

- **Domain** - –≤–∞—à Auth0 –¥–æ–º–µ–Ω (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `dev-xxxxx.auth0.com`)
- **Client ID** - —É–Ω—ñ–∫–∞–ª—å–Ω–∏–π —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä –∫–ª—ñ—î–Ω—Ç–∞
- **Client Secret** - —Å–µ–∫—Ä–µ—Ç–Ω–∏–π –∫–ª—é—á (–Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "Show" —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏)

### Application URIs

–ü—Ä–æ–∫—Ä—É—Ç—ñ—Ç—å –≤–Ω–∏–∑ –¥–æ **Application URIs** —Ç–∞ –¥–æ–¥–∞–π—Ç–µ:

**Allowed Callback URLs:**

```
http://localhost:3000/auth/callback
```

**Allowed Logout URLs:**

```
http://localhost:3000
```

**Allowed Web Origins:**

```
http://localhost:3000
```

**Allowed Origins (CORS):**

```
http://localhost:3000
```

–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Save Changes"** –≤–Ω–∏–∑—É —Å—Ç–æ—Ä—ñ–Ω–∫–∏!

## üë• –ö—Ä–æ–∫ 4: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–æ—Ü—ñ–∞–ª—å–Ω–∏—Ö –ø—Ä–æ–≤–∞–π–¥–µ—Ä—ñ–≤

### Google OAuth

1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –¥–æ **Authentication ‚Üí Social**
2. –ó–Ω–∞–π–¥—ñ—Ç—å **Google** —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω—å–æ–≥–æ
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á (toggle)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Save"**

> Auth0 –Ω–∞–¥–∞—î —Ç–µ—Å—Ç–æ–≤—ñ Google credentials –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

### GitHub OAuth

1. –í —Ä–æ–∑–¥—ñ–ª—ñ **Authentication ‚Üí Social**
2. –ó–Ω–∞–π–¥—ñ—Ç—å **GitHub** —Ç–∞ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –Ω—å–æ–≥–æ
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –ø–µ—Ä–µ–º–∏–∫–∞—á (toggle)
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **"Save"**

> Auth0 –Ω–∞–¥–∞—î —Ç–µ—Å—Ç–æ–≤—ñ GitHub credentials –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

## üîê –ö—Ä–æ–∫ 5: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö –æ—Ç–æ—á–µ–Ω–Ω—è

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É (—è–∫—â–æ –π–æ–≥–æ —â–µ –Ω–µ–º–∞—î):

```ini
# –°–µ—Ä–≤–µ—Ä
APP_PORT=3000
APP_HOST=0.0.0.0
NODE_ENV=development

# MongoDB Atlas
MONGODB_URI=mongodb+srv://username:password@cluster0.xxxxx.mongodb.net/?retryWrites=true&w=majority
DB_NAME=atlas-products

# Auth0 (–∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ —Å–≤–æ—ó –∑–Ω–∞—á–µ–Ω–Ω—è)
AUTH0_ISSUER_BASE_URL=https://YOUR_DOMAIN.auth0.com
AUTH0_CLIENT_ID=your_client_id_here
AUTH0_CLIENT_SECRET=your_client_secret_here
AUTH0_BASE_URL=http://localhost:3000
AUTH0_SECRET=–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ_–∫–æ–º–∞–Ω–¥—É_–Ω–∏–∂—á–µ_–¥–ª—è_–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó

# JWT
JWT_SECRET=–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ_–∫–æ–º–∞–Ω–¥—É_–Ω–∏–∂—á–µ_–¥–ª—è_–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
JWT_EXPIRES_IN=7d

# Session
SESSION_SECRET=–≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ_–∫–æ–º–∞–Ω–¥—É_–Ω–∏–∂—á–µ_–¥–ª—è_–≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
SESSION_MAX_AGE=86400000

# Mongoose
MONGOOSE_AUTO_INDEX=true
MONGOOSE_MAX_POOL_SIZE=20
```

## üîë –ö—Ä–æ–∫ 6: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Å–µ–∫—Ä–µ—Ç—ñ–≤

### Windows (PowerShell)

```powershell
# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–¥–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç—É
-join ((65..90) + (97..122) + (48..57) | Get-Random -Count 32 | % {[char]$_})

# –ê–±–æ –±–∞–∑–æ–≤–∏–π –≤–∞—Ä—ñ–∞–Ω—Ç
[Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 }))
```

### Linux/Mac (Terminal)

```bash
# –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –æ–¥–Ω–æ–≥–æ —Å–µ–∫—Ä–µ—Ç—É
openssl rand -base64 32

# –ê–±–æ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞
node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
```

**–ó–≥–µ–Ω–µ—Ä—É–π—Ç–µ 3 —Ä—ñ–∑–Ω—ñ —Å–µ–∫—Ä–µ—Ç–∏ –¥–ª—è:**

- `AUTH0_SECRET`
- `JWT_SECRET`
- `SESSION_SECRET`

## ‚úÖ –ö—Ä–æ–∫ 7: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
# –Ø–∫—â–æ —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ
yarn install
```

## üöÄ –ö—Ä–æ–∫ 8: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
# –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
yarn dev

# –ê–±–æ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω —Ä–µ–∂–∏–º—ñ
yarn start
```

## üß™ –ö—Ä–æ–∫ 9: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä: `http://localhost:3000`
2. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –∫–Ω–æ–ø–∫—É **"–£–≤—ñ–π—Ç–∏"**
3. –í–∏–±–µ—Ä—ñ—Ç—å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ (Google –∞–±–æ GitHub)
4. –î–æ–∑–≤–æ–ª—å—Ç–µ –¥–æ—Å—Ç—É–ø –¥–æ –≤–∞—à–æ–≥–æ –∞–∫–∞—É–Ω—Ç—É
5. –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É –≤–∏ –ø–æ–±–∞—á–∏—Ç–µ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å –≤ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó

## üì± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API –∑ JWT

```bash
# 1. –£–≤—ñ–π–¥—ñ—Ç—å —á–µ—Ä–µ–∑ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–∫—Ä–æ–∫ 9)

# 2. –û—Ç—Ä–∏–º–∞–π—Ç–µ JWT —Ç–æ–∫–µ–Ω (—É –±—Ä–∞—É–∑–µ—Ä—ñ –∞–±–æ —á–µ—Ä–µ–∑ curl –∑ cookies)
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ:
http://localhost:3000/auth/api/token

# –ê–±–æ —á–µ—Ä–µ–∑ curl (–∑–∞–º—ñ–Ω—ñ—Ç—å YOUR_SESSION_COOKIE –Ω–∞ —Ä–µ–∞–ª—å–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è –∑ –±—Ä–∞—É–∑–µ—Ä–∞)
curl -X GET http://localhost:3000/auth/api/token \
  -H "Cookie: connect.sid=YOUR_SESSION_COOKIE"

# 3. –ó–±–µ—Ä–µ–∂—ñ—Ç—å –æ—Ç—Ä–∏–º–∞–Ω–∏–π —Ç–æ–∫–µ–Ω
export JWT_TOKEN="–≤–∞—à_—Ç–æ–∫–µ–Ω_—Ç—É—Ç"

# 4. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ç–æ–∫–µ–Ω –¥–ª—è API –∑–∞–ø–∏—Ç—ñ–≤
curl -X POST http://localhost:3000/api/products \
  -H "Authorization: Bearer $JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "Test Product",
    "price": 99.99,
    "description": "Created via API with JWT"
  }'
```

## ‚ùì –ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –ü–æ–º–∏–ª–∫–∞: "Callback URL mismatch"

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤ Auth0 –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è—Ö –¥–æ–¥–∞–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π callback URL:

```
http://localhost:3000/auth/callback
```

### –ü–æ–º–∏–ª–∫–∞: "Invalid state"

**–†—ñ—à–µ–Ω–Ω—è:**

1. –û—á–∏—Å—Ç—ñ—Ç—å cookies –±—Ä–∞—É–∑–µ—Ä–∞
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
3. –°–ø—Ä–æ–±—É–π—Ç–µ —É–≤—ñ–π—Ç–∏ –∑–Ω–æ–≤—É

### –ü–æ–º–∏–ª–∫–∞: "unauthorized_client"

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ `AUTH0_CLIENT_ID` —Ç–∞ `AUTH0_CLIENT_SECRET` –ø—Ä–∞–≤–∏–ª—å–Ω—ñ
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –Ω–µ–º–∞—î –∑–∞–π–≤–∏—Ö –ø—Ä–æ–±—ñ–ª—ñ–≤ –≤ `.env`
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `.env`

### –ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `MONGODB_URI` –≤ `.env`
2. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è —â–æ –≤–∞—à IP –¥–æ–¥–∞–Ω–æ –≤ MongoDB Atlas Network Access
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ –ø–∞—Ä–æ–ª—å –Ω–µ –º—ñ—Å—Ç–∏—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω–∏—Ö —Å–∏–º–≤–æ–ª—ñ–≤ (–∞–±–æ –∑–∞–∫–æ–¥—É–π—Ç–µ —ó—Ö)

## üìö –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

- –ü–æ–≤–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: [AUTHENTICATION.md](AUTHENTICATION.md)
- API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è: [API.md](API.md)
- –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞: [ARCHITECTURE.md](ARCHITECTURE.md)

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä –≤–∞—à —Å–µ—Ä–≤–µ—Ä –ø—Ä–∞—Ü—é—î –∑ –ø–æ–≤–Ω–æ—Ü—ñ–Ω–Ω–æ—é –∞–≤—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—î—é —á–µ—Ä–µ–∑ Auth0!

**–©–æ —Ç–µ–ø–µ—Ä –º–æ–∂–Ω–∞ —Ä–æ–±–∏—Ç–∏:**

- ‚úÖ –í—Ö–æ–¥–∏—Ç–∏ —á–µ—Ä–µ–∑ Google –∞–±–æ GitHub
- ‚úÖ –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ —Å–≤—ñ–π –ø—Ä–æ—Ñ—ñ–ª—å
- ‚úÖ –°—Ç–≤–æ—Ä—é–≤–∞—Ç–∏/—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏/–≤–∏–¥–∞–ª—è—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ (—Ç—ñ–ª—å–∫–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ)
- ‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ API –∑ JWT —Ç–æ–∫–µ–Ω–∞–º–∏
- ‚úÖ –ì–æ—Å—Ç—ñ –º–æ–∂—É—Ç—å –ø–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ø—Ä–æ–¥—É–∫—Ç–∏ –±–µ–∑ –≤—Ö–æ–¥—É

---

**–ü–æ—Ç—Ä—ñ–±–Ω–∞ –¥–æ–ø–æ–º–æ–≥–∞?** –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –¥–µ—Ç–∞–ª—å–Ω—É –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ –ø–∞–ø—Ü—ñ `docs/`
